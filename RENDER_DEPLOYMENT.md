# ğŸš€ Render Deployment Guide

Deploy your E-Commerce Multi-Vendor Platform to Render in minutes!

## Why Render?

âœ… **Easy Deployment** - Git-based deployments  
âœ… **Free Tier Available** - Great for testing  
âœ… **Automatic HTTPS** - SSL certificates included  
âœ… **PostgreSQL Included** - Managed database  
âœ… **Auto-scaling** - Handles traffic spikes  
âœ… **Great Performance** - Fast global CDN  

## ğŸš€ Quick Deployment (5 Minutes)

### Method 1: One-Click Deploy (Recommended)

1. **Push to GitHub** (if not already):
   ```bash
   git add .
   git commit -m "Ready for Render deployment"
   git push origin main
   ```

2. **Deploy to Render**:
   - Go to [render.com](https://render.com)
   - Sign up/Login with GitHub
   - Click "New +" â†’ "Web Service"
   - Connect your repository
   - Render will auto-detect it's a Python app!

3. **Configure Settings**:
   - **Name**: `your-ecommerce-app`
   - **Environment**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt && python init_data.py`
   - **Start Command**: `gunicorn app:app`

4. **Add Environment Variables**:
   ```
   FLASK_CONFIG=production
   SECRET_KEY=your-super-secret-key-here
   STRIPE_SECRET_KEY=sk_test_your_stripe_key
   PAYPAL_CLIENT_ID=your_paypal_client_id
   ```

5. **Add PostgreSQL Database**:
   - In Render dashboard: "New +" â†’ "PostgreSQL"
   - Name: `ecommerce-db`
   - Copy the "External Database URL"
   - Add to your web service as `DATABASE_URL`

6. **Deploy**: Click "Create Web Service"

### Method 2: Infrastructure as Code

Use the included `render.yaml` file:

1. **Connect Repository** to Render
2. **Select Blueprint** deployment
3. **Choose** `render.yaml` file
4. **Update Environment Variables** in the dashboard
5. **Deploy**

## ğŸ”§ Environment Variables Setup

### Required Variables
```bash
# Flask Configuration
FLASK_CONFIG=production
SECRET_KEY=your-super-secret-key-change-this

# Database (Auto-generated by Render PostgreSQL)
DATABASE_URL=postgresql://user:pass@host:port/dbname

# Payment Gateways (Update with your keys)
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret
PAYPAL_MODE=sandbox

# M-Pesa (Optional - for mobile money)
MPESA_CONSUMER_KEY=your_mpesa_consumer_key
MPESA_CONSUMER_SECRET=your_mpesa_consumer_secret
MPESA_SHORTCODE=your_mpesa_shortcode
MPESA_PASSKEY=your_mpesa_passkey
MPESA_ENVIRONMENT=sandbox
```

### How to Set Environment Variables

1. **In Render Dashboard**:
   - Go to your web service
   - Click "Environment" tab
   - Add each variable with "Add Environment Variable"

2. **Important**: 
   - Generate a strong SECRET_KEY: `python -c "import secrets; print(secrets.token_hex(32))"`
   - Use your real payment gateway keys for production

## ğŸ’¾ Database Setup

### Automatic PostgreSQL Setup

1. **Create Database**:
   - Render Dashboard â†’ "New +" â†’ "PostgreSQL"
   - Name: `ecommerce-db`
   - Region: Same as your web service

2. **Connect to Web Service**:
   - Copy "External Database URL" from database dashboard
   - Add as `DATABASE_URL` environment variable in web service

3. **Database Initialization**:
   - Render automatically runs `python init_data.py` during build
   - This creates tables and adds sample data

### Manual Database Access (Optional)

```bash
# Connect to your Render PostgreSQL
psql $DATABASE_URL

# Check tables
\dt

# Check sample data
SELECT COUNT(*) FROM "user";
SELECT COUNT(*) FROM product;
```

## ğŸŒ Custom Domain (Optional)

1. **In Render Dashboard**:
   - Go to your web service
   - Click "Settings" tab
   - Scroll to "Custom Domains"
   - Add your domain (e.g., `yourstore.com`)

2. **DNS Configuration**:
   - Add CNAME record: `www` â†’ `your-app.onrender.com`
   - Add A record: `@` â†’ Render's IP (provided in dashboard)

3. **SSL Certificate**:
   - Render automatically provisions SSL certificates
   - HTTPS will be available within minutes

## ğŸ” Monitoring & Logs

### View Application Logs
1. **Render Dashboard** â†’ Your Service â†’ "Logs" tab
2. **Real-time logs** show application startup and requests
3. **Filter logs** by time period or search terms

### Health Monitoring
- Render automatically monitors your app
- **Health checks** ensure your app stays running
- **Automatic restarts** if app crashes
- **Email alerts** for downtime (paid plans)

## ğŸš€ Deployment Process

### What Happens During Deployment

1. **Build Phase**:
   ```bash
   # Render automatically runs:
   pip install -r requirements.txt
   python init_data.py  # Creates database tables and sample data
   ```

2. **Start Phase**:
   ```bash
   # Render starts your app with:
   gunicorn app:app
   ```

3. **Health Check**:
   - Render checks if your app responds to HTTP requests
   - App is marked "Live" when healthy

### Deployment Time
- **First Deploy**: 3-5 minutes
- **Subsequent Deploys**: 1-2 minutes
- **Zero Downtime**: Render handles traffic during deploys

## ğŸ”§ Troubleshooting

### Common Issues & Solutions

#### 1. Build Fails
```bash
# Check build logs in Render dashboard
# Common fix: Update requirements.txt
pip freeze > requirements.txt
```

#### 2. Database Connection Error
```bash
# Verify DATABASE_URL is set correctly
# Check PostgreSQL service is running
# Ensure both services are in same region
```

#### 3. App Won't Start
```bash
# Check start command: gunicorn app:app
# Verify app.py exists in root directory
# Check application logs for Python errors
```

#### 4. Static Files Not Loading
```bash
# Render serves static files automatically
# Ensure static/ directory exists
# Check file paths in templates
```

### Getting Help

1. **Render Documentation**: [render.com/docs](https://render.com/docs)
2. **Community Forum**: [community.render.com](https://community.render.com)
3. **Support**: Available on paid plans

## ğŸ’° Pricing

### Free Tier
- âœ… **Web Services**: 750 hours/month
- âœ… **PostgreSQL**: 1GB storage, 1 month retention
- âœ… **SSL Certificates**: Included
- âœ… **Custom Domains**: Included
- âš ï¸ **Limitations**: Apps sleep after 15 min inactivity

### Paid Plans (Starting $7/month)
- âœ… **Always On**: No sleeping
- âœ… **More Resources**: CPU, RAM, storage
- âœ… **Longer Backups**: Database retention
- âœ… **Priority Support**: Email support

## ğŸ¯ Production Checklist

### Before Going Live
- [ ] Set strong SECRET_KEY
- [ ] Configure real payment gateway keys
- [ ] Set up custom domain
- [ ] Test all functionality
- [ ] Configure monitoring alerts

### After Deployment
- [ ] Test user registration and login
- [ ] Test product browsing and cart
- [ ] Test checkout process (with test payments)
- [ ] Test admin panel access
- [ ] Test vendor functionality
- [ ] Monitor application logs

## ğŸš€ Deploy Now!

Your e-commerce system is **100% ready** for Render deployment!

### Quick Start Commands
```bash
# 1. Commit your code
git add .
git commit -m "Deploy to Render"
git push origin main

# 2. Go to render.com and connect your repo
# 3. Your app will be live in 5 minutes!
```

### Default Login Credentials
After deployment, you can login with:
- **Admin**: username `admin`, password `admin123`
- **User**: username `user`, password `user123`
- **Vendors**: username `techstore`/`homestyle`/`fitnessgear`, password `vendor123`

**ğŸ‰ Your multi-vendor e-commerce platform will be live at: `https://your-app-name.onrender.com`**

---

**Need help?** Check the troubleshooting section above or refer to [Render's documentation](https://render.com/docs).